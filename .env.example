# Solar PV LLM AI System - Environment Configuration
# Copy this file to .env and fill in the values

# ===========================================
# API Configuration
# ===========================================
API_HOST=0.0.0.0
API_PORT=8000
API_VERSION=v1
API_PREFIX=/api
DEBUG=false

# ===========================================
# Database Configuration
# ===========================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://solar_user:your_password@localhost:5432/solar_pv_ai
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10
DATABASE_ECHO=false

# ===========================================
# Vector Store Configuration
# ===========================================
# Options: pinecone, weaviate, chromadb, qdrant, faiss
VECTOR_STORE_TYPE=pinecone

# Pinecone Configuration
VECTOR_STORE_API_KEY=your_pinecone_api_key
VECTOR_STORE_INDEX_NAME=solar-pv-knowledge
VECTOR_DIMENSION=1536

# For self-hosted vector stores (Weaviate, Qdrant, etc.)
# VECTOR_STORE_URL=http://localhost:8080

# ===========================================
# LLM Configuration
# ===========================================
# Options: openai, anthropic, azure, huggingface
LLM_PROVIDER=openai
LLM_MODEL=gpt-4-turbo-preview
LLM_API_KEY=your_openai_api_key
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2048
LLM_TOP_P=1.0

# For Azure OpenAI
# LLM_PROVIDER=azure
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
# AZURE_OPENAI_API_VERSION=2023-12-01-preview

# For Anthropic Claude
# LLM_PROVIDER=anthropic
# LLM_MODEL=claude-3-opus-20240229

# ===========================================
# Embedding Configuration
# ===========================================
EMBEDDING_PROVIDER=openai
EMBEDDING_MODEL=text-embedding-ada-002
EMBEDDING_BATCH_SIZE=100

# ===========================================
# RAG Configuration
# ===========================================
RAG_TOP_K=5
RAG_SIMILARITY_THRESHOLD=0.7
RAG_CHUNK_SIZE=1000
RAG_CHUNK_OVERLAP=200

# ===========================================
# Feedback Configuration
# ===========================================
# Confidence threshold below which responses are flagged for review
FEEDBACK_CONFIDENCE_THRESHOLD=0.8
# Rating threshold (1-5 scale) below which responses are flagged
FEEDBACK_NEGATIVE_RATING_THRESHOLD=2.0
FEEDBACK_REVIEW_BATCH_SIZE=50

# ===========================================
# Retraining Configuration
# ===========================================
RETRAINING_ENABLED=true
# Cron format: minute hour day month weekday
# Default: Weekly on Sunday at 2 AM
RETRAINING_SCHEDULE_CRON=0 2 * * 0
RETRAINING_MIN_FEEDBACK_COUNT=100
RETRAINING_CHECKPOINT_DIR=./data/model_checkpoints

# ===========================================
# LoRA Fine-tuning Configuration
# ===========================================
LORA_R=8
LORA_ALPHA=16
LORA_DROPOUT=0.1
LORA_TARGET_MODULES=["q_proj", "v_proj"]

# ===========================================
# Training Configuration
# ===========================================
TRAINING_BATCH_SIZE=4
TRAINING_EPOCHS=3
TRAINING_LEARNING_RATE=2e-4
TRAINING_GRADIENT_ACCUMULATION_STEPS=4

# ===========================================
# Celery Configuration (Task Queue)
# ===========================================
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
CELERY_TASK_TRACK_STARTED=true

# ===========================================
# Security Configuration
# ===========================================
# Generate with: openssl rand -hex 32
SECRET_KEY=your_secret_key_here_min_32_chars
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
ALLOWED_ORIGINS=["http://localhost:3000", "http://localhost:8000"]

# ===========================================
# Admin Configuration
# ===========================================
ADMIN_USERNAME=admin
# Generate hash with: python -c "from passlib.hash import bcrypt; print(bcrypt.hash('your_password'))"
ADMIN_PASSWORD_HASH=$2b$12$your_hashed_password_here
ALLOW_REGISTRATION=false

# ===========================================
# Logging Configuration
# ===========================================
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
# Options: json, text
LOG_FORMAT=json
# Optional: specify log file path
# LOG_FILE=./logs/app.log

# ===========================================
# Monitoring Configuration
# ===========================================
ENABLE_PROMETHEUS=true
PROMETHEUS_PORT=9090

# ===========================================
# File Storage Configuration
# ===========================================
DATA_DIR=./data
UPLOAD_MAX_SIZE_MB=50
